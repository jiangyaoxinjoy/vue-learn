webpackJsonp([2],{"5zde":function(e,t,o){o("zQR9"),o("qyJz"),e.exports=o("FeBl").Array.from},Gu7T:function(e,t,o){"use strict";t.__esModule=!0;var n,r=o("c/Tr"),s=(n=r)&&n.__esModule?n:{default:n};t.default=function(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return(0,s.default)(e)}},bk6q:function(e,t){},"c/Tr":function(e,t,o){e.exports={default:o("5zde"),__esModule:!0}},fBQ2:function(e,t,o){"use strict";var n=o("evD5"),r=o("X8DO");e.exports=function(e,t,o){t in e?n.f(e,t,r(0,o)):e[t]=o}},qyJz:function(e,t,o){"use strict";var n=o("+ZMJ"),r=o("kM2E"),s=o("sB3e"),i=o("msXi"),a=o("Mhyx"),c=o("QRG4"),u=o("fBQ2"),f=o("3fs2");r(r.S+r.F*!o("dY0y")(function(e){Array.from(e)}),"Array",{from:function(e){var t,o,r,l,v=s(e),d="function"==typeof this?this:Array,h=arguments.length,m=h>1?arguments[1]:void 0,p=void 0!==m,k=0,b=f(v);if(p&&(m=n(m,h>2?arguments[2]:void 0,2)),void 0==b||d==Array&&a(b))for(o=new d(t=c(v.length));t>k;k++)u(o,k,p?m(v[k],k):v[k]);else for(l=b.call(v),o=new d;!(r=l.next()).done;k++)u(o,k,p?i(l,m,[r.value,k],!0):r.value);return o.length=k,o}})},tcnj:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o("Xxa5"),r=o.n(n),s=o("Gu7T"),i=o.n(s),a=o("exGp"),c=o.n(a),u=o("suiO"),f=o("gyMJ"),l={name:"List",data:function(){return{bookList:[],offset:0,hasMore:!0,timer:null}},components:{Mheader:u.a},created:function(){this.getBookList()},methods:{loadMore:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout(function(){var t=e.$refs.scroll;t.scrollTop+t.clientHeight+20>t.scrollHeight&&e.getBookList()},50)},getBookList:function(){var e=this;return c()(r.a.mark(function t(){var o,n,s;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.hasMore){t.next=9;break}return t.next=3,Object(f.d)(e.offset);case 3:o=t.sent,n=o.hasMore,s=o.books,e.hasMore=n,e.bookList=[].concat(i()(e.bookList),i()(s)),e.offset=e.bookList.length;case 9:case"end":return t.stop()}},t,e)}))()},delBook:function(e){var t=this;this.$messagebox.confirm("确定要删除:"+e.bookName,"提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){return Object(f.e)(e.bookId)}).then(function(o){t.bookList=t.bookList.filter(function(t){return t!==e}),t.$messagebox({type:"success",message:"删除成功!"})}).catch(function(){t.$messagebox({type:"info",message:"已取消删除"})})}},mounted:function(){var e=this,t=this.$refs.scroll,o=t.offsetTop,n=0;t.addEventListener("touchstart",function(r){if(t.offsetTop==o&&0==t.scrollTop){var s=r.touches[0].pageY,i=function e(r){var i=r.touches[0].pageY;(n=i-s)>0?n<=50?t.style.top=n+o+"px":(n=50,t.style.top=50+o+"px"):(t.removeEventListener("touchmove",e),t.removeEventListener("touchend",a))},a=function r(s){var a=setInterval(function(){if(!(n>0))return clearInterval(a),n=0,t.style.top=o+"px",t.removeEventListener("touchmove",i),t.removeEventListener("touchend",r),console.log("刷新"),e.bookList=[],e.offset=0,e.hasMore=!0,void e.getBookList();n--,t.style.top=n+o+"px"},5)};t.addEventListener("touchmove",i),t.addEventListener("touchend",a)}})}},v={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("Mheader",[e._v("列表")]),e._v(" "),o("div",{ref:"scroll",staticClass:"content",on:{scroll:e.loadMore}},[o("ul",e._l(e.bookList,function(t,n){return o("router-link",{key:n,attrs:{to:"/home",tag:"li",to:{path:"/detail",params:{bid:t.bookId},name:"detail"}}},[o("mt-cell-swipe",{attrs:{title:"",right:[{content:"删除",style:{background:"salmon",color:"#fff",height:"45px",marginTop:"50px",borderRadius:"15px"},handler:function(){e.delBook(t)}}]}},[o("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.bookCover,expression:"book.bookCover"}],attrs:{alt:"book.bookInfo"}}),e._v(" "),o("div",[o("h4",[e._v(e._s(t.bookName))]),e._v(" "),o("p",[e._v(e._s(t.bookInfo))]),e._v(" "),o("b",[e._v(e._s(t.bookPrice))])])])],1)}))])],1)},staticRenderFns:[]};var d=o("VU/8")(l,v,!1,function(e){o("bk6q")},"data-v-6e7cc29e",null);t.default=d.exports}});
//# sourceMappingURL=2.6504072b0cea8e92ec68.js.map